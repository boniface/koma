<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Linear Algebra - Koma</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Koma</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage guide <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../backends/">Backends</a>
</li>

                    
                        
<li class="active">
    <a href="./">Linear Algebra</a>
</li>

                    
                        
<li >
    <a href="../ndims/">N-Dimensional Containers</a>
</li>

                    
                        
<li >
    <a href="../plotting/">Plotting</a>
</li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../advanced/generics/">Generics & Boxing</a>
</li>

                    
                        
<li >
    <a href="../../advanced/source/">Build From Source</a>
</li>

                    
                        
<li >
    <a href="../../advanced/contributing/">Contributing</a>
</li>

                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../backends/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../ndims/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#matrices">Matrices</a></li>
        
            <li><a href="#creating-matrices">Creating Matrices</a></li>
        
            <li><a href="#math-functions">Math Functions</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="matrices">Matrices</h1>
<p>Koma's <code>Matrix&lt;T&gt;</code> type is a 2D container designed to be used for linear algebra.</p>
<h3 id="creating-matrices">Creating Matrices</h3>
<p>While it is always possible to use the <code>*Factory</code> classes provided by your chosen backend directly,
Koma provides a set of top-level convenience functions to easily create new matrices. For example:</p>
<pre><code class="kotlin">// x is a 3x3 identity matrix
var x = eye(3)

// x is a 3x3 with Gaussian random noise, distribution 0,1
x = randn(3,3)

// x is a 3x3 with uniform random noise
x = rand(3,3)

// x is a 4x5 matrix where the ith row and jth column has the value i+j*2
x = fill(4,5) { row, col -&gt; row+col*2 }

val someData = doubleArrayOf(doubleArrayOf(1,2,3),
                             doubleArrayOf(4,5,6))
// x is a 2x3 matrix constructed from the data in a java array of arrays
x = create(someData)
</code></pre>

<p>See <a href="https://github.com/kyonifer/koma/blob/master/core/src/koma/creators.kt">here</a> for a complete list of
available creators. There is also a DSL for matrix literals:</p>
<pre><code class="kotlin">// a is a 2x3 matrix filled with the numbers passed in
val a = mat[1,2,3.3 end
            4,5,6]
</code></pre>

<h3 id="math-functions">Math Functions</h3>
<p>Matrices have useful map functions that return matrices for chaining operations (see <a href="../core/src/koma/extensions.kt">here</a> for a complete list).</p>
<pre><code class="kotlin">    // Create a 3x3 identity and then add 0.1 to all elements
    val x = eye(3) + 0.1

    // Map each element through a function that adds .01
    val y = x.mapMat { it + .01 }

    // Map each element through a function that adds or subtracts depending on the element index
    val z = x.mapMatIndexed { row, col, ele -&gt; if (row &gt; col) ele + 1 else ele - 1 }

    // Are there any elements greater than 1?
    val hasGreater = x.any { it &gt; 1 }

    // Are all elements greater than 1?
    val allGreater = x.all { it &gt; 1 }

    // Apply a function to a row at a time and store the outputs in a contiguous matrix
    val sins = x.mapRows { row -&gt; sin(row) }

    // Print all elements greater than 1
    x.each { if (it&gt;1) println(it) }

</code></pre>

<p>We can also do some linear algebra:</p>
<pre><code class="kotlin">
    // Matrix literal syntax, see creators.kt for 
    // convenience functions like zeros(5,5)
    var A = mat[1,0,0 end
                0,3,0 end
                0,0,4]

    // Calculate the matrix inverse
    var Ainv = A.inv()

    var b = mat[2,2,4].T

    // Use overloaded operators:

    // * is matrix multiplication 
    var c = A*b + 1

    // emul is element-wise multiplication
    var d = (A emul A) + 1

    // Number of decimals to show
    format(&quot;short&quot;)

    println(c)

</code></pre>

<p>Which produces:</p>
<pre><code>Output:

mat[ 3.00  end
     7.00  end
     17.00 ]
</code></pre>

<p>Many special functions are supported (see <a href="../core/src/koma/matrix/Matrix.kt">the matrix interface</a> for a complete list):</p>
<pre><code class="kotlin">
    val a = 2*eye(3)+.01 // eye is identity matrix

    a.chol()  // Cholesky decomposition
    a.det()   // Determinant
    a.diag()  // Diagonal vector
    a.inv()   // Matrix inverse
    a.norm()  // Matrix norm

</code></pre>

<p>Scalar functions can be applied elementwise to matrices (see <a href="../core/src/koma/scalarfuncs.kt">here</a> for a complete list):</p>
<pre><code class="kotlin">    val x = create(0..100)/5.0  // Matrix of 0, 1/5, 2/5, ...
    val y = sin(x)              // Sin applied elementwise
    plot(y)                     // Plot of sin function
</code></pre>

<p>Matrix indexing and slicing is supported (see <a href="../core/src/koma/operators.kt">here</a> for a list of operators as well as the Matrix<T> type):</p>
<pre><code class="kotlin">
    val x = randn(5,5)
    val y = x[0,0..4] // Grab the first row

    x[0..2,0..3] = zeros(3,4) // Set the upper-left 3x4 sub-matrix of x to zero

</code></pre>

<p>A Matrix is convertible to an Iterable:</p>
<pre><code class="kotlin">    val x = randn(5,5).toIterable()

    // Adds all elements and returns sum
    x.reduce { x, y -&gt; x+y }

    // Returns list of all elements greater than 4
    x.find { it &gt; 4 }

</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../tabbed_code.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>